# 🚀 Οδηγός Εγκατάστασης - Δημοτική Αστυνομία v3.0

## Περιεχόμενα Πακέτου

Το νέο σύστημα περιλαμβάνει:
- ✅ **Νέο app_with_migration.py** - Εφαρμογή με ενσωματωμένη migration
- ✅ **Web Migration Interface** - Μετάβαση δεδομένων μέσω web
- ✅ **Σύστημα Ρόλων** - Admin, PowerUser (Επόπτης), Officer
- ✅ **Κεντρικό Dashboard** - Νέο μενού με όλες τις λειτουργίες
- ✅ **Σύστημα Μηνυμάτων** - Εσωτερική επικοινωνία
- ✅ **Νέες Μονάδες** - ΚΟΚ, Έλεγχος, Επιδόσεις, Αναφορές

## 📋 Βήμα 1: Προετοιμασία

### 1.1 Δημιουργία Αντιγράφου Ασφαλείας
```bash
# Κάντε αντίγραφο της τρέχουσας εφαρμογής
cp app.py app_backup.py
cp -r templates templates_backup
```

### 1.2 Έλεγχος Παλιάς Βάσης
Βεβαιωθείτε ότι υπάρχει το αρχείο `municipal_police_v2.db`

## 📋 Βήμα 2: Αντικατάσταση Αρχείων

### 2.1 Αντικατάσταση του app.py
```bash
# Αντικαταστήστε το παλιό app.py
mv app_with_migration.py app.py
```

### 2.2 Αντιγραφή Νέων Templates
Βεβαιωθείτε ότι έχετε όλα τα νέα templates:

**Αναγκαία Template Δομή:**
```
templates/
├── base_v2.html (υπάρχον)
├── login.html (υπάρχον)
├── dashboard/
│   └── central_menu.html (ΝΕΟ)
├── modules/
│   ├── kok.html (ΝΕΟ)
│   ├── elegxos.html (ΝΕΟ)
│   ├── epidoseis.html (ΝΕΟ)
│   └── anafores.html (ΝΕΟ)
├── messages/
│   ├── inbox.html (ΝΕΟ)
│   ├── sent.html (ΝΕΟ)
│   ├── new_message.html (ΝΕΟ)
│   └── view_message.html (ΝΕΟ)
└── admin/
    ├── migration.html (ΝΕΟ)
    ├── migration_result.html (ΝΕΟ)
    ├── add_user_enhanced.html (υπάρχον)
    └── users_enhanced.html (υπάρχον)
```

## 📋 Βήμα 3: Εκκίνηση και Migration

### 3.1 Εκκίνηση Εφαρμογής
```bash
python app.py
```

### 3.2 Σύνδεση ως Admin
- Πηγαίνετε στο `http://localhost:5000/login`
- Συνδεθείτε με τα υπάρχοντα admin credentials

### 3.3 Εκτέλεση Migration
1. Πηγαίνετε στο Admin Dashboard
2. Κλικ στο **"Μετάβαση Δεδομένων"**
3. Κλικ στο **"Εκκίνηση Μετάβασης"**
4. Περιμένετε την ολοκλήρωση

## 📋 Βήμα 4: Επαλήθευση

### 4.1 Έλεγχος Νέων Λειτουργιών
- ✅ Κεντρικό Dashboard εμφανίζεται σωστά
- ✅ Τα 5 modules (ΚΟΚ, Έλεγχος, κλπ) λειτουργούν
- ✅ Το σύστημα μηνυμάτων είναι προσβάσιμο
- ✅ Η διαχείριση χρηστών δείχνει τους νέους ρόλους

### 4.2 Δοκιμή Νέων Χρηστών
1. Πηγαίνετε στη διαχείριση χρηστών
2. Δημιουργήστε έναν νέο χρήστη **PowerUser**
3. Συνδεθείτε με τον νέο χρήστη
4. Επαληθεύστε ότι βλέπει το σωστό dashboard

## 🎯 Νέες Λειτουργίες v3.0

### Σύστημα Ρόλων
| Ρόλος | Περιγραφή | Δικαιώματα |
|-------|-----------|------------|
| **Admin** | Διαχειριστής | Όλα τα δικαιώματα |
| **PowerUser** | Επόπτης | Όλα εκτός δημιουργίας χρηστών και επεξεργασίας παραβάσεων |
| **Officer** | Αστυνομικός | Βασικές λειτουργίες, μηνύματα |

### Κεντρικό Dashboard
- **Στατιστικά χρήστη** σε πραγματικό χρόνο
- **5 Κύριες Μονάδες**: ΚΟΚ, Έλεγχος Καταστημάτων, Επιδόσεις, Αναφορές, Μηνύματα
- **Γρήγορες ενέργειες** για συχνές εργασίες
- **Προσωποποιημένο περιεχόμενο** βάσει ρόλου

### Σύστημα Μηνυμάτων
- **Ατομικά μηνύματα** για όλους τους χρήστες
- **Μαζικά μηνύματα** για Admin/PowerUser
- **Ένδειξη κατάστασης** (διαβάστηκε/μη διαβάστηκε)
- **Πλήρης ιστορικό** εισερχόμενων/απεσταλμένων

## 🔧 Αντιμετώπιση Προβλημάτων

### Πρόβλημα: "Template not found"
```bash
# Βεβαιωθείτε ότι έχετε αντιγράψει όλα τα templates
ls -la templates/dashboard/
ls -la templates/modules/
ls -la templates/messages/
```

### Πρόβλημα: "Migration failed"
1. Βεβαιωθείτε ότι υπάρχει `municipal_police_v2.db`
2. Ελέγξτε τα δικαιώματα του φακέλου
3. Κλείστε όλες τις άλλες εφαρμογές που χρησιμοποιούν τη βάση

### Πρόβλημα: "Database locked"
```bash
# Κλείστε την εφαρμογή και δοκιμάστε ξανά
pkill -f "python app.py"
python app.py
```

## 📞 Υποστήριξη

Αν αντιμετωπίσετε οποιοδήποτε πρόβλημα:
1. Ελέγξτε τα logs της εφαρμογής
2. Βεβαιωθείτε ότι όλα τα αρχεία είναι στη σωστή θέση
3. Δοκιμάστε με καθαρή εκκίνηση

---

**Επιτυχής εγκατάσταση!** 🎉
Το νέο σύστημα είναι έτοιμο προς χρήση με όλες τις νέες λειτουργίες!